{% extends "base.html" %}
{% block content %}

<h3 class="center-align">All Reviews</h3>

    <!-- show all genres -->
    {% for genre in genres %}
    <b>{{ genre.genre_name }}: </b> <br>
        <!-- check if any books fo each genre -->
        {% for book in books if book.genre_name == genre.genre_name %}
        <ul class="collapsible">
            <li>
              <div class="collapsible-header green darken-4 white-text"><i class="fas fa-arrow-alt-circle-down"></i>
                <b>{{ book.book_title }}</b> <br>
                {{ book.author }} <br>
                {{ book.genre_name }} <br>
                {{ book.url }} <br>
                derive and show average review <br>
            </div>
              <div class="collapsible-body">
                    <span>
                    <!-- check if any reviews with that book title -->
                    {% for review in reviews if review.book_title == book.book_title %}
                    <!-- if any reviews, show all reviews -->
                    <!-- want some way to split list items (ie reviews) -->
                        User: {{ review.username }} <br>
                        {% for user in users if user.username == review.username %}
                            Age Category: {{ user.age_category}} <br>
                            Gender: {{ user.gender}} <br>
                        {% endfor %}
                        Recommends this book: {{ review.recommend }} <br>
                        Stars out of 5: {{ review.stars }} <br>
                        Review comment: {{ review.comment }} <br>
                        Date Created: {{ review.date_created }} <br>
                        <!-- if else statement if not an updated review -->
                        Date Updated: {{ review.date_updated }} <br> <br>
                    <!-- want some way to split list items (ie reviews) -->
                    <!-- if no reviews show some text -->
                    {% else %}
                        Sorry, there are no reviews for this book currently. 
                        If you have read it please add a review here. <br>
                    {% endfor %}
                    </span>
              </div>
            </li>
        </ul>
        <!-- if no books of this genre -->
        {% else %}
        Sorry, there are no books in the database for this genre currently. 
        If you have read a book of this genre please add it here and then add a review here. <br>
        {% endfor %}

    {% endfor %}

{% endblock %}